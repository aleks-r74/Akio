import{a as U}from"./chunk-IMEDXYCP.js";import{Ha as v,Ja as g,Ka as I,Ma as S,Na as j,Oa as H,Pa as b,Qa as M,Qb as q,Ra as n,Rb as A,Sa as o,Sb as K,Ta as F,W as f,Wa as E,Xa as c,Ya as _,Z as z,cc as T,da as N,dc as y,ea as w,fa as P,fb as l,gb as s,gc as J,hb as C,kb as x,ma as h,mb as B,nb as R,pb as p,qb as m,rb as $,ua as a,va as V}from"./chunk-KMNQFCXU.js";function W(t,d){if(t&1&&(n(0,"div",1)(1,"span",2),l(2),p(3,"translate"),o(),n(4,"span",3),l(5),o()()),t&2){let e=_(2);a(2),s(m(3,2,"Page sum")),a(3),s(e.pageSum)}}function X(t,d){if(t&1&&(n(0,"div",0)(1,"div",1)(2,"span",2),l(3),p(4,"translate"),o(),n(5,"span",3),l(6),o()(),n(7,"div",1)(8,"span",2),l(9),p(10,"translate"),o(),n(11,"span",3),l(12),o()(),v(13,W,6,4,"div",1),o()),t&2){let e=_();a(3),s(m(4,5,"Transactions")),a(3),s(e.transactionNum),a(3),s(m(10,7,"Total sum")),a(3),s(e.transactionSum),a(),S(e.showPageSum?13:-1)}}var L=(()=>{class t{transactionNum;transactionSum;pageSum;showPageSum=!1;ngOnChanges(e){this.showPageSum=!!this.transactionSum&&!!this.pageSum&&this.transactionSum>this.pageSum}static \u0275fac=function(r){return new(r||t)};static \u0275cmp=f({type:t,selectors:[["app-page-summary"]],inputs:{transactionNum:"transactionNum",transactionSum:"transactionSum",pageSum:"pageSum"},standalone:!0,features:[N,x],decls:1,vars:1,consts:[[1,"is-flex","is-justify-content-center"],[1,"tags","has-addons","m-0","p-0","mx-1"],[1,"tag","is-light","min-width","is-size-6","is-size-7-mobile"],[1,"tag","is-info","is-light","is-size-6","is-size-7-mobile","min-width"]],template:function(r,i){r&1&&v(0,X,14,9,"div",0),r&2&&S(i.transactionSum?0:-1)},dependencies:[y,T],styles:[".min-width[_ngcontent-%COMP%]{min-width:50px}"]})}return t})();var Y=(t,d)=>({"is-disabled":t,"is-selected":d}),Z=t=>({"is-selected":t}),ee=t=>({"is-disabled":t}),G=(()=>{class t{currentPage;totalPages;pageSelected=new h;pageRange=1;intervalId;onPageClick(e){e<1||e>this.totalPages||(this.currentPage=e,this.pageSelected.emit(e))}movePages(e){e+this.pageRange<1||e+this.pageRange==this.totalPages-1||(this.pageRange+=e,this.intervalId=setInterval(()=>{e+this.pageRange<1||e+this.pageRange==this.totalPages-1||(this.pageRange+=e)},70))}stopTimer(){clearInterval(this.intervalId)}static \u0275fac=function(r){return new(r||t)};static \u0275cmp=f({type:t,selectors:[["app-pagination"]],inputs:{currentPage:"currentPage",totalPages:"totalPages"},outputs:{pageSelected:"pageSelected"},standalone:!0,features:[x],decls:21,vars:19,consts:[["role","navigation","aria-label","pagination",1,"pagination","is-small"],[1,"pagination-list"],[1,"pagination-link",3,"mousedown","mouseup"],[1,"pagination-link",3,"click","ngClass"],["aria-current","page",1,"pagination-link",3,"click","ngClass"],[1,"pagination-link",3,"mousedown","mouseup","ngClass"]],template:function(r,i){r&1&&(n(0,"nav",0)(1,"ul",1)(2,"li")(3,"a",2),c("mousedown",function(){return i.movePages(-1)})("mouseup",function(){return i.stopTimer()}),n(4,"span"),l(5,"<<"),o()()(),n(6,"li")(7,"a",3),c("click",function(){return i.onPageClick(i.pageRange)}),n(8,"span"),l(9),o()()(),n(10,"li")(11,"a",4),c("click",function(){return i.onPageClick(i.pageRange+1)}),l(12),o()(),n(13,"li")(14,"a",3),c("click",function(){return i.onPageClick(i.pageRange+2)}),n(15,"span"),l(16),o()()(),n(17,"li")(18,"a",5),c("mousedown",function(){return i.movePages(1)})("mouseup",function(){return i.stopTimer()}),n(19,"span"),l(20,">>"),o()()()()()),r&2&&(a(3),I("is-disabled",i.totalPages<=3),a(4),g("ngClass",R(9,Y,i.totalPages==1,i.currentPage===i.pageRange)),a(2),s(i.pageRange),a(2),g("ngClass",B(12,Z,i.currentPage===i.pageRange+1)),a(),s(i.pageRange+1),a(2),g("ngClass",R(14,Y,i.totalPages<3,i.currentPage===i.pageRange+2)),a(2),C("",i.pageRange+2," "),a(2),g("ngClass",B(17,ee,i.totalPages<=3)))},dependencies:[q],styles:[".nav[_ngcontent-%COMP%]{height:40px}"]})}return t})();function te(t,d){if(t&1){let e=E();n(0,"app-pagination",7),c("pageSelected",function(i){w(e);let u=_();return P(u.onPageSelected(i))}),o()}if(t&2){let e=_();g("currentPage",(e.data==null?null:e.data.currentPage)+1)("totalPages",e.data==null?null:e.data.totalPages)}}function ie(t,d){if(t&1){let e=E();n(0,"tr",8),c("click",function(){let i=w(e).$implicit,u=_();return P(u.onMfClick(i.time_stamp))}),n(1,"td"),l(2),p(3,"date"),o(),n(4,"td"),l(5),o(),n(6,"td"),l(7),p(8,"titlecase"),o(),n(9,"td"),l(10),p(11,"titlecase"),o(),n(12,"td"),l(13),o(),n(14,"td"),l(15),o(),n(16,"td"),l(17),o()()}if(t&2){let e=d.$implicit;a(2),s($(3,7,e.time_stamp,"MMM d, HH:mm")),a(3),s(e.receipt_num),a(2),s(m(8,10,e.source)),a(3),s(m(11,12,e.dest)),a(3),s(e.amount),a(2),s(e.initiator),a(2),s(e.description)}}function ne(t,d){if(t&1&&F(0,"app-page-summary",6),t&2){let e=_();g("pageSum",e.data==null?null:e.data.totalSumPage)("transactionNum",e.data==null?null:e.data.transactionsNum)("transactionSum",e.data==null?null:e.data.totalSum)}}var Q=(()=>{class t{data;showDetails;receiptSelected=new h;pageSelected=new h;onMfClick(e){this.showDetails&&this.receiptSelected.emit(e)}onPageSelected(e){this.pageSelected.emit(e)}static \u0275fac=function(r){return new(r||t)};static \u0275cmp=f({type:t,selectors:[["app-money-flow-table"]],inputs:{data:"data",showDetails:"showDetails"},outputs:{receiptSelected:"receiptSelected",pageSelected:"pageSelected"},standalone:!0,features:[x],decls:32,vars:27,consts:[[1,"table","is-narrow-mobile","is-size-7-mobile","is-size-6","has-text-centered"],[1,"sticky-header"],["colspan","7",1,"m-0","p-0"],[1,"is-flex","is-justify-content-center","mb-1"],[3,"currentPage","totalPages"],[1,"has-text-centered"],[3,"pageSum","transactionNum","transactionSum"],[3,"pageSelected","currentPage","totalPages"],[3,"click"]],template:function(r,i){r&1&&(n(0,"table",0)(1,"thead",1)(2,"tr")(3,"td",2)(4,"div",3),v(5,te,1,2,"app-pagination",4),o()()(),n(6,"tr")(7,"th",5),l(8),p(9,"translate"),o(),n(10,"th",5),l(11),p(12,"translate"),o(),n(13,"th",5),l(14),p(15,"translate"),o(),n(16,"th",5),l(17),p(18,"translate"),o(),n(19,"th",5),l(20),p(21,"translate"),o(),n(22,"th",5),l(23),p(24,"translate"),o(),n(25,"th",5),l(26),p(27,"translate"),o()()(),n(28,"tbody"),b(29,ie,18,14,"tr",null,j),o()(),v(31,ne,1,3,"app-page-summary",6)),r&2&&(I("is-hoverable",i.showDetails)("is-hidden",!(i.data!=null&&i.data.moneyFlows)),a(5),S(i.data!=null&&i.data.totalPages&&i.data.totalPages>1?5:-1),a(3),s(m(9,13,"Date")),a(3),s(m(12,15,"Receipt")),a(3),s(m(15,17,"Source")),a(3),s(m(18,19,"Dest")),a(3),s(m(21,21,"Amount")),a(3),s(m(24,23,"Initiator")),a(3),s(m(27,25,"Description")),a(3),M(i.data==null?null:i.data.moneyFlows),a(2),S(i.showDetails?31:-1))},dependencies:[K,A,L,y,T,G],styles:[".min-width[_ngcontent-%COMP%]{min-width:80px}"]})}return t})();var be=(()=>{class t{max_length=18;transform(e,...r){if(e===void 0)return"";e=e.trim();let i=e.split(`
`);return i.length>1?(i[0].length>=this.max_length&&(i[0]=i[0].substring(0,18)+"..."),`${i[0]} [+${i.length-1}]`):i[0]}static \u0275fac=function(r){return new(r||t)};static \u0275pipe=z({name:"transactionServicesPipe",type:t,pure:!0,standalone:!0})}return t})();function ae(t,d){if(t&1&&(n(0,"div",5),l(1),o()),t&2){let e=d.$implicit;a(),s(e)}}function oe(t,d){if(t&1&&(n(0,"div",6),F(1,"app-money-flow-table",7),o()),t&2){let e=_(2);a(),g("data",e.relatedTransactions)}}function le(t,d){t&1&&(l(0),p(1,"translate")),t&2&&C(" ",m(1,1,"Show Related Transactions")," ")}function re(t,d){t&1&&(l(0),p(1,"translate")),t&2&&C(" ",m(1,1,"Loading"),"... ")}function se(t,d){if(t&1){let e=E();n(0,"div",1)(1,"button",8),c("click",function(){w(e);let i=_(2);return P(i.onShowMoneyTransactionsClick(i.transaction.receipt_num,i.transaction.date_time))}),v(2,le,2,3)(3,re,2,3),o()()}if(t&2){let e=_(2);a(2),S(e.requestFlag?3:2)}}function pe(t,d){if(t&1&&(n(0,"table",2)(1,"tr")(2,"th",3),l(3),p(4,"translate"),o(),n(5,"th",3),l(6),p(7,"translate"),o(),n(8,"th",3),l(9),p(10,"translate"),o(),n(11,"th",3),l(12),p(13,"translate"),o(),n(14,"th",4),l(15),p(16,"translate"),o(),n(17,"th",3),l(18),p(19,"translate"),o(),n(20,"th",3),l(21),p(22,"translate"),o()(),n(23,"tr")(24,"td",3),l(25),o(),n(26,"td",3),l(27),o(),n(28,"td",3),l(29),o(),n(30,"td",3),l(31),o(),n(32,"td",4),l(33),o(),n(34,"td",3),l(35),o(),n(36,"td",3),l(37),o()()(),n(38,"div",1),b(39,ae,2,1,"div",5,H),o(),v(41,oe,2,1,"div",6)(42,se,4,1,"div",1)),t&2){let e=_();a(3),s(m(4,15,"Status")),a(3),s(m(7,17,"Free")),a(3),s(m(10,19,"Phone")),a(3),s(m(13,21,"Money accepted")),a(3),s(m(16,23,"Money posted")),a(3),s(m(19,25,"Payment type")),a(3),s(m(22,27,"Employee")),a(4),s(e.transaction.finished?"OK":"ERR"),a(2),s(e.transaction.has_free_haircut?"YES":"NO"),a(2),s(e.transaction.phone_num),a(2),s(e.transaction.money_accepted),a(2),s(e.transaction.money_posted),a(2),s(e.transaction.payment_type),a(2),s(e.transaction.employee),a(2),M(e.allServices()),a(2),S(e.relatedTransactions?41:42)}}function me(t,d){if(t&1){let e=E();n(0,"div",1)(1,"div",9),l(2,"No details available"),o(),n(3,"button",8),c("click",function(){w(e);let i=_();return P(i.closeDetails())}),n(4,"span"),l(5,"OK"),o()()()}}var $e=(()=>{class t{httpService;transaction;active=!1;closeEvent=new h;requestFlag=!1;relatedTransactions;constructor(e){this.httpService=e}onShowMoneyTransactionsClick(e,r){!r||!e||(this.requestFlag=!0,this.httpService.getMoneyFlowsByReceiptNum(e,r).subscribe({next:i=>this.relatedTransactions={moneyFlows:i},complete:()=>this.requestFlag=!1}))}closeDetails(){this.closeEvent.emit(!0),this.relatedTransactions=void 0}allServices(){return this.transaction?.services.split(`
`)}static \u0275fac=function(r){return new(r||t)(V(J))};static \u0275cmp=f({type:t,selectors:[["app-transaction-details"]],inputs:{transaction:"transaction",active:"active"},outputs:{closeEvent:"close"},standalone:!0,features:[x],decls:3,vars:2,consts:[[3,"close","active"],[1,"has-text-centered","my-1"],[1,"table","my-0","is-narrow-mobile","is-size-6","is-size-7-mobile","is-fullwidth"],[1,"has-text-centered"],[1,"has-text-centered","is-hidden-mobile"],[1,"has-background-success-70"],[1,"is-flex","is-justify-content-center","my-3","my-2",2,"width","100%"],[3,"data"],[1,"button","is-small",3,"click"],[1,"box"]],template:function(r,i){r&1&&(n(0,"app-modal",0),c("close",function(){return i.closeDetails()}),v(1,pe,43,29)(2,me,6,0,"div",1),o()),r&2&&(g("active",i.active),a(),S(i.transaction?1:2))},dependencies:[U,Q,y,T]})}return t})();var Le=(()=>{class t{fromDateTime;toDateTime;dates=new h;constructor(){let e=new Date,r=new Date;e.setUTCHours(0),e.setMinutes(0),e.setSeconds(0),r.setUTCHours(23),r.setMinutes(59),r.setSeconds(0),this.toDateTime=r.toISOString().substring(0,19),this.fromDateTime=e.toISOString().substring(0,19)}ngOnInit(){setTimeout(()=>this.emitDates())}onDateChange(e){let r=e.target;r.getAttribute("id")==="fromDateTime"?this.fromDateTime=r.value:r.getAttribute("id")==="toDateTime"&&(this.toDateTime=r.value)}emitDates(){this.dates.emit({from:this.fromDateTime,to:this.toDateTime})}static \u0275fac=function(r){return new(r||t)};static \u0275cmp=f({type:t,selectors:[["app-date-between"]],outputs:{dates:"dates"},standalone:!0,features:[x],decls:22,vars:11,consts:[[1,"container","is-max-tablet","my-3"],[1,"columns","is-centered"],[1,"column","is-narrow"],[1,"field","has-addons","is-justify-content-center"],[1,"control"],[1,"button","is-static","min-width","is-size-7-touch"],["type","datetime-local","id","fromDateTime",1,"input","is-size-7-touch",3,"change","value"],["type","datetime-local","id","toDateTime",1,"input","is-size-7-touch",3,"change","value"],[1,"column","is-narrow","has-text-centered"],[1,"button","is-size-7-touch",3,"click"]],template:function(r,i){r&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"p",4)(5,"a",5),l(6),p(7,"translate"),o()(),n(8,"p",4)(9,"input",6),c("change",function(k){return i.onDateChange(k)}),o()()()(),n(10,"div",2)(11,"div",3)(12,"p",4)(13,"a",5),l(14),p(15,"translate"),o()(),n(16,"p",4)(17,"input",7),c("change",function(k){return i.onDateChange(k)}),o()()()(),n(18,"div",8)(19,"button",9),c("click",function(){return i.emitDates()}),l(20),p(21,"translate"),o()()()()),r&2&&(a(6),C("",m(7,5,"From"),":"),a(3),g("value",i.fromDateTime),a(5),C("",m(15,7,"To"),":"),a(3),g("value",i.toDateTime),a(3),s(m(21,9,"Show")))},dependencies:[y,T]})}return t})();export{be as a,L as b,G as c,Q as d,$e as e,Le as f};
