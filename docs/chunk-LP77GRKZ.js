import{a as q}from"./chunk-H5O2VQJR.js";import{Ha as C,Ja as m,Ka as S,Ma as P,Oa as g,Pa as f,Qa as u,Ra as o,Rb as L,Sa as a,Sb as D,Ta as F,Tb as $,Ua as E,Ub as k,Va as O,Vb as w,W as y,Xa as T,Ya as h,Z as M,fb as s,fc as A,gb as d,gc as N,hb as x,hc as z,jc as j,lb as B,ob as I,qb as l,rb as c,sb as _,ua as i,va as b}from"./chunk-HUWQSKRG.js";var R=(()=>{class t{transform(e,...n){return e>0?`+${e}`:`${e}`}static \u0275fac=function(n){return new(n||t)};static \u0275pipe=M({name:"numberSign",type:t,pure:!0,standalone:!0})}return t})();var J=(t,r)=>({positive:t,negative:r});function K(t,r){t&1&&(o(0,"th"),s(1,"Date"),a())}function Q(t,r){if(t&1&&(C(0,K,2,0,"th"),o(1,"th"),s(2),l(3,"titlecase"),a()),t&2){let e=r.$implicit,n=r.$index;P(n===0?0:-1),i(2),d(c(3,2,e))}}function U(t,r){if(t&1&&(E(0),o(1,"span",13),s(2),l(3,"numberSign"),a(),O()),t&2){let e=r.ngIf;i(),m("ngClass",I(4,J,e>0,e<0)),i(),d(c(3,2,e))}}function V(t,r){if(t&1&&(o(0,"td"),s(1),l(2,"number"),C(3,U,4,7,"ng-container",12),a()),t&2){let e=r.$implicit,n=r.$index,p=h().$index,v=h();i(),x("",_(2,2,e.balance,"1.0-0")," "),i(2),m("ngIf",v.getDeltaBalance(p,n))}}function W(t,r){if(t&1&&(o(0,"tr",9)(1,"td",10),s(2),l(3,"date"),a(),o(4,"td",11),s(5),l(6,"date"),a(),f(7,V,4,5,"td",null,g),a()),t&2){let e=r.$implicit,n=h();i(2),d(_(3,2,e,"MMM dd HH:mm")),i(3),d(_(6,5,e,"MMM dd")),i(2),u(n.data==null?null:n.data.get(e))}}function X(t,r){t&1&&(o(0,"tr")(1,"td"),s(2),l(3,"translate"),a()()),t&2&&(i(2),d(c(3,1,"No Data")))}var oe=(()=>{class t{httpService;requestFlag=!1;errorResponse;data;dataCopyArr=[];containers=[];constructor(e){this.httpService=e}onDateSelected(e){e&&(setTimeout(()=>this.requestFlag=!0),this.httpService.getLogs(e+"-01").subscribe({next:n=>{this.data=new Map(Object.entries(n)),this.containers.length==0&&this.setContainerNames(),this.dataCopyArr=Array.from(this.data.values()),console.log(this.dataCopyArr)},error:n=>{this.errorResponse=n,this.requestFlag=!1},complete:()=>{this.requestFlag=!1,this.errorResponse=void 0}}))}setContainerNames(){if(this.data)for(let e of this.data?.keys()){this.containers=this.data?.get(e)?.map(n=>n.containerName.toLowerCase()),this.containers.sort();return}}getDeltaBalance(e,n){return!this.dataCopyArr||e+1==this.dataCopyArr.length?0:Math.floor(this.dataCopyArr[e][n].balance)-Math.floor(this.dataCopyArr[e+1][n].balance)}static \u0275fac=function(n){return new(n||t)(b(j))};static \u0275cmp=y({type:t,selectors:[["app-logs"]],standalone:!0,features:[B],decls:18,vars:7,consts:[[3,"dateMonthSelected"],[1,"is-flex","is-justify-content-center","my-1","loading"],[1,"is-size-7"],[3,"error"],[1,"container","is-max-tablet"],[1,"is-flex","is-justify-content-center"],[1,"table-container"],[1,"table","is-size-7-touch","is-size-6","is-narrow","is-striped"],[1,"has-background-info"],[1,"has-text-centered"],[1,"is-hidden-touch"],[1,"is-hidden-desktop"],[4,"ngIf"],[1,"delta","is-pulled-right",3,"ngClass"]],template:function(n,p){n&1&&(o(0,"app-date-month",0),T("dateMonthSelected",function(H){return p.onDateSelected(H)}),a(),o(1,"div",1)(2,"p",2),s(3),l(4,"translate"),a(),F(5,"app-error",3),a(),o(6,"div",4)(7,"div",5)(8,"div",6)(9,"table",7)(10,"thead")(11,"tr",8),f(12,Q,4,4,"th",null,g),a()(),o(14,"tbody"),f(15,W,9,8,"tr",9,g,!1,X,4,3,"tr"),a()()()()()),n&2&&(i(2),S("is-invisible",!p.requestFlag),i(),x("",c(4,5,"Loading")," ..."),i(2),m("error",p.errorResponse),i(7),u(p.containers),i(3),u(p.data==null?null:p.data.keys()))},dependencies:[q,z,N,A,$,k,w,R,L,D],styles:[".delta[_ngcontent-%COMP%]{position:absolute;bottom:-.8em;right:10%;color:#000;border-radius:25%;padding:0 4px;font-size:.9em;font-weight:700;opacity:90%}td[_ngcontent-%COMP%]{position:relative;vertical-align:middle;text-align:center}@media (max-width: 1024px){tr[_ngcontent-%COMP%]{height:35px}}.table.is-striped[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{text-align:center}@media (min-width: 1023px){tr[_ngcontent-%COMP%]{height:45px}}.positive[_ngcontent-%COMP%]{background-color:#7cff77b0}.negative[_ngcontent-%COMP%]{background-color:#ff6e6ea1}.table-container[_ngcontent-%COMP%]{position:relative;max-height:350;overflow-y:auto}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%]{position:sticky;z-index:2}thead[_ngcontent-%COMP%]{top:0}"]})}return t})();export{oe as LogsComponent};
