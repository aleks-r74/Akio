import{a as j}from"./chunk-ZZGPOI5M.js";import{Ha as _,Ja as h,Ka as E,Ma as f,Na as N,Oa as z,Pa as b,Qa as k,Qb as R,Ra as t,Rb as $,Sa as i,Ta as M,W as x,Wa as T,Xa as d,Ya as p,Z as B,bc as w,cc as D,da as V,ea as g,ec as q,fa as v,fb as o,gb as s,hb as P,kb as S,ma as C,ob as m,pb as c,qb as H,ua as a,va as O}from"./chunk-EFT7P6D7.js";function J(n,u){if(n&1&&(t(0,"div",1)(1,"span",2),o(2),m(3,"translate"),i(),t(4,"span",3),o(5),i()()),n&2){let e=p(2);a(2),s(c(3,2,"Page sum")),a(3),s(e.pageSum)}}function L(n,u){if(n&1&&(t(0,"div",0)(1,"div",1)(2,"span",2),o(3),m(4,"translate"),i(),t(5,"span",3),o(6),i()(),t(7,"div",1)(8,"span",2),o(9),m(10,"translate"),i(),t(11,"span",3),o(12),i()(),_(13,J,6,4,"div",1),i()),n&2){let e=p();a(3),s(c(4,5,"Transactions")),a(3),s(e.transactionNum),a(3),s(c(10,7,"Total sum")),a(3),s(e.transactionSum),a(),f(e.showPageSum?13:-1)}}var K=(()=>{class n{transactionNum;transactionSum;pageSum;showPageSum=!1;ngOnChanges(e){this.showPageSum=!!this.transactionSum&&!!this.pageSum&&this.transactionSum>this.pageSum}static \u0275fac=function(l){return new(l||n)};static \u0275cmp=x({type:n,selectors:[["app-page-summary"]],inputs:{transactionNum:"transactionNum",transactionSum:"transactionSum",pageSum:"pageSum"},standalone:!0,features:[V,S],decls:1,vars:1,consts:[[1,"is-flex","is-justify-content-center"],[1,"tags","has-addons","m-0","p-0","mx-1"],[1,"tag","is-light","min-width"],[1,"tag","is-info","is-light","min-width"]],template:function(l,r){l&1&&_(0,L,14,9,"div",0),l&2&&f(r.transactionSum?0:-1)},dependencies:[D,w],styles:[".min-width[_ngcontent-%COMP%]{min-width:75px}"]})}return n})();function Y(n,u){if(n&1){let e=T();t(0,"tr",4),d("click",function(){let r=g(e).$implicit,y=p();return v(y.onMfClick(r.time_stamp))}),t(1,"td"),o(2),m(3,"date"),i(),t(4,"td"),o(5),i(),t(6,"td"),o(7),m(8,"titlecase"),i(),t(9,"td"),o(10),m(11,"titlecase"),i(),t(12,"td"),o(13),i(),t(14,"td"),o(15),i(),t(16,"td"),o(17),i()()}if(n&2){let e=u.$implicit;a(2),s(H(3,7,e.time_stamp,"MMMM d, HH:mm")),a(3),s(e.receipt_num),a(2),s(c(8,10,e.source)),a(3),s(c(11,12,e.dest)),a(3),s(e.amount),a(2),s(e.initiator),a(2),s(e.description)}}function G(n,u){if(n&1&&M(0,"app-page-summary",3),n&2){let e=p();h("pageSum",e.data==null?null:e.data.totalSumPage)("transactionNum",e.data==null?null:e.data.transactionsNum)("transactionSum",e.data==null?null:e.data.totalSum)}}var U=(()=>{class n{data;showDetails;receiptSelected=new C;onMfClick(e){this.showDetails&&this.receiptSelected.emit(e)}static \u0275fac=function(l){return new(l||n)};static \u0275cmp=x({type:n,selectors:[["app-money-flow-table"]],inputs:{data:"data",showDetails:"showDetails"},outputs:{receiptSelected:"receiptSelected"},standalone:!0,features:[S],decls:28,vars:24,consts:[[1,"table","is-size-7","has-text-centered"],[1,"sticky-header"],[1,"has-text-centered","min-width"],[3,"pageSum","transactionNum","transactionSum"],[3,"click"]],template:function(l,r){l&1&&(t(0,"table",0)(1,"thead",1)(2,"tr")(3,"th",2),o(4),m(5,"translate"),i(),t(6,"th",2),o(7),m(8,"translate"),i(),t(9,"th",2),o(10),m(11,"translate"),i(),t(12,"th",2),o(13),m(14,"translate"),i(),t(15,"th",2),o(16),m(17,"translate"),i(),t(18,"th",2),o(19),m(20,"translate"),i(),t(21,"th",2),o(22),m(23,"translate"),i()()(),t(24,"tbody"),b(25,Y,18,14,"tr",null,N),i()(),_(27,G,1,3,"app-page-summary",3)),l&2&&(E("is-hoverable",r.showDetails),a(4),s(c(5,10,"Date")),a(3),s(c(8,12,"Receipt")),a(3),s(c(11,14,"Source")),a(3),s(c(14,16,"Dest")),a(3),s(c(17,18,"Amount")),a(3),s(c(20,20,"Initiator")),a(3),s(c(23,22,"Description")),a(3),k(r.data==null?null:r.data.moneyFlows),a(2),f(r.showDetails?27:-1))},dependencies:[$,R,K,D,w],styles:[".min-width[_ngcontent-%COMP%]{min-width:80px}"]})}return n})();var xe=(()=>{class n{transform(e,...l){if(e===void 0)return"";e=e.trim();let r=e.split(`
`);return r.length>1?`${r[0]} [+${r.length-1}]`:r[0]}static \u0275fac=function(l){return new(l||n)};static \u0275pipe=B({name:"transactionServicesPipe",type:n,pure:!0,standalone:!0})}return n})();function Q(n,u){if(n&1&&(t(0,"div",5),o(1),i()),n&2){let e=u.$implicit;a(),s(e)}}function W(n,u){if(n&1&&(t(0,"div",6),M(1,"app-money-flow-table",7),i()),n&2){let e=p(2);a(),h("data",e.relatedTransactions)}}function X(n,u){n&1&&o(0," Show Related Transactions ")}function Z(n,u){n&1&&o(0," Loading... ")}function ee(n,u){if(n&1){let e=T();t(0,"div",1)(1,"button",8),d("click",function(){g(e);let r=p(2);return v(r.onShowMoneyTransactionsClick(r.transaction.receipt_num,r.transaction.date_time))}),_(2,X,1,0)(3,Z,1,0),i()()}if(n&2){let e=p(2);a(2),f(e.requestFlag?3:2)}}function te(n,u){if(n&1&&(t(0,"table",2)(1,"tr")(2,"th",3),o(3,"Status"),i(),t(4,"th",3),o(5,"Free"),i(),t(6,"th",3),o(7,"Phone"),i(),t(8,"th",3),o(9,"Money accepted"),i(),t(10,"th",3),o(11,"Money posted"),i(),t(12,"th",3),o(13,"Payment type"),i(),t(14,"th",3),o(15,"Employee"),i()(),t(16,"tr")(17,"td",3),o(18),i(),t(19,"td",3),o(20),i(),t(21,"td",3),o(22),i(),t(23,"td",3),o(24),i(),t(25,"td",3),o(26),i(),t(27,"td",3),o(28),i(),t(29,"td",3),o(30),i()()(),t(31,"div",4),b(32,Q,2,1,"div",5,z),i(),_(34,W,2,1,"div",6)(35,ee,4,1,"div",1)),n&2){let e=p();a(18),s(e.transaction.finished?"OK":"ERR"),a(2),s(e.transaction.has_free_haircut?"YES":"NO"),a(2),s(e.transaction.phone_num),a(2),s(e.transaction.money_accepted),a(2),s(e.transaction.money_posted),a(2),s(e.transaction.payment_type),a(2),s(e.transaction.employee),a(2),k(e.allServices()),a(2),f(e.relatedTransactions?34:35)}}function ne(n,u){if(n&1){let e=T();t(0,"div",1)(1,"div",9),o(2,"No details available"),i(),t(3,"button",8),d("click",function(){g(e);let r=p();return v(r.closeDetails())}),t(4,"span"),o(5,"OK"),i()()()}}var Pe=(()=>{class n{httpService;transaction;active=!1;closeEvent=new C;requestFlag=!1;relatedTransactions;constructor(e){this.httpService=e}onShowMoneyTransactionsClick(e,l){!l||!e||(this.requestFlag=!0,this.httpService.getMoneyFlowsByReceiptNum(e,l).subscribe({next:r=>this.relatedTransactions={moneyFlows:r},complete:()=>this.requestFlag=!1}))}closeDetails(){this.closeEvent.emit(!0),this.relatedTransactions=void 0}allServices(){return this.transaction?.services.split(`
`)}static \u0275fac=function(l){return new(l||n)(O(q))};static \u0275cmp=x({type:n,selectors:[["app-transaction-details"]],inputs:{transaction:"transaction",active:"active"},outputs:{closeEvent:"close"},standalone:!0,features:[S],decls:3,vars:2,consts:[[3,"close","active"],[1,"has-text-centered","my-1","is-size-7"],[1,"table","my-0"],[1,"has-text-centered","is-size-7"],[1,"has-text-centered","my-1"],[1,"is-size-7","has-background-success-70"],[1,"is-flex","is-justify-content-center","my-3","is-size-7","my-2",2,"width","100%"],[3,"data"],[1,"button","is-small",3,"click"],[1,"box"]],template:function(l,r){l&1&&(t(0,"app-modal",0),d("close",function(){return r.closeDetails()}),_(1,te,36,8)(2,ne,6,0,"div",1),i()),l&2&&(h("active",r.active),a(),f(r.transaction?1:2))},dependencies:[j,U]})}return n})();function ie(n,u){if(n&1){let e=T();t(0,"li")(1,"a",2),d("click",function(){g(e);let r=p();return v(r.onPageClick(1))}),t(2,"span"),o(3,"1"),i()()(),t(4,"li")(5,"span",4),o(6,"\u2026"),i()()}}function ae(n,u){if(n&1){let e=T();t(0,"li")(1,"span",4),o(2,"\u2026"),i()(),t(3,"li")(4,"a",2),d("click",function(){g(e);let r=p();return v(r.onPageClick(r.totalPages))}),t(5,"span"),o(6),i()()()}if(n&2){let e=p();a(5),E("is-hidden",e.currentPage+1>=e.totalPages),a(),s(e.totalPages)}}var Be=(()=>{class n{currentPage;totalPages;pageSelected=new C;onPageClick(e){e<1||e>this.totalPages||(this.currentPage=e,this.pageSelected.emit(e))}static \u0275fac=function(l){return new(l||n)};static \u0275cmp=x({type:n,selectors:[["app-pagination"]],inputs:{currentPage:"currentPage",totalPages:"totalPages"},outputs:{pageSelected:"pageSelected"},standalone:!0,features:[S],decls:15,vars:9,consts:[["role","navigation","aria-label","pagination",1,"pagination","is-small"],[1,"pagination-list"],[1,"pagination-link",3,"click"],["aria-current","page",1,"pagination-link","is-current"],[1,"pagination-ellipsis"]],template:function(l,r){l&1&&(t(0,"nav",0)(1,"ul",1),_(2,ie,7,0),t(3,"li")(4,"a",2),d("click",function(){return r.onPageClick(r.currentPage-1)}),t(5,"span"),o(6),i()()(),t(7,"li")(8,"a",3),o(9),i()(),t(10,"li")(11,"a",2),d("click",function(){return r.onPageClick(r.currentPage+1)}),t(12,"span"),o(13),i()()(),_(14,ae,7,3),i()()),l&2&&(a(2),f(r.currentPage>2&&r.totalPages!=3?2:-1),a(3),E("is-hidden",r.currentPage<=1),a(),s(r.currentPage-1),a(3),s(r.currentPage),a(3),E("is-hidden",r.currentPage+1>r.totalPages),a(),P("",r.currentPage+1," "),a(),f(r.totalPages>4?14:-1))}})}return n})();var Re=(()=>{class n{fromDateTime;toDateTime;dates=new C;constructor(){let e=new Date,l=new Date;e.setUTCHours(0),e.setMinutes(0),e.setSeconds(0),l.setUTCHours(23),l.setMinutes(59),l.setSeconds(0),this.toDateTime=l.toISOString().substring(0,19),this.fromDateTime=e.toISOString().substring(0,19)}ngOnInit(){this.emitDates()}onDateChange(e){let l=e.target;l.getAttribute("id")==="fromDateTime"?this.fromDateTime=l.value:l.getAttribute("id")==="toDateTime"&&(this.toDateTime=l.value)}emitDates(){this.dates.emit({from:this.fromDateTime,to:this.toDateTime})}static \u0275fac=function(l){return new(l||n)};static \u0275cmp=x({type:n,selectors:[["app-date-between"]],outputs:{dates:"dates"},standalone:!0,features:[S],decls:17,vars:11,consts:[[1,"is-size-5","is-flex","is-justify-content-center","mt-0"],[1,"table"],["for","fromDateTime"],["type","datetime-local","id","fromDateTime","name","fromDateTime",3,"change","value"],["for","toDateTime"],["type","datetime-local","id","toDateTime","name","toDateTime",3,"change","value"],["colspan","2",1,"is-vcentered"],["type","button",3,"click"]],template:function(l,r){l&1&&(t(0,"form",0)(1,"table",1)(2,"tr")(3,"td")(4,"label",2),o(5),m(6,"translate"),i(),t(7,"input",3),d("change",function(F){return r.onDateChange(F)}),i()(),t(8,"td")(9,"label",4),o(10),m(11,"translate"),i(),t(12,"input",5),d("change",function(F){return r.onDateChange(F)}),i()(),t(13,"td",6)(14,"button",7),d("click",function(){return r.emitDates()}),o(15),m(16,"translate"),i()()()()()),l&2&&(a(5),P("",c(6,5,"From"),": "),a(2),h("value",r.fromDateTime),a(3),P("",c(11,7,"To"),": "),a(2),h("value",r.toDateTime),a(3),s(c(16,9,"Show")))},dependencies:[D,w]})}return n})();export{xe as a,K as b,U as c,Pe as d,Be as e,Re as f};
