import{a as J}from"./chunk-YIFQWM42.js";import{Ha as T,Ia as H,Ja as u,Ka as I,Ma as w,Na as N,Oa as $,Pa as b,Qa as F,Ra as i,Rb as A,Sa as o,Ta as P,Tb as K,Ub as U,W as v,Wa as y,Xa as m,Ya as _,Z as V,ea as C,fa as x,fb as l,fc as E,gb as s,gc as D,hb as h,ib as B,jb as j,jc as L,lb as S,ma as f,nb as R,ob as O,qb as p,rb as d,sb as q,ua as n,va as z}from"./chunk-YEVMIGMU.js";var Y=(a,g)=>({"is-disabled":a,"is-selected":g}),X=a=>({"is-selected":a}),Z=a=>({"is-disabled":a}),G=(()=>{class a{currentPage;totalPages;pageSelected=new f;pageRange=1;intervalId;onPageClick(t){t<1||t>this.totalPages||(this.currentPage=t,this.pageSelected.emit(t))}movePages(t){t+this.pageRange<1||t+this.pageRange==this.totalPages-1||(this.pageRange+=t,this.intervalId=setInterval(()=>{t+this.pageRange<1||t+this.pageRange==this.totalPages-1||(this.pageRange+=t)},70))}stopTimer(){clearInterval(this.intervalId)}static \u0275fac=function(r){return new(r||a)};static \u0275cmp=v({type:a,selectors:[["app-pagination"]],inputs:{currentPage:"currentPage",totalPages:"totalPages"},outputs:{pageSelected:"pageSelected"},standalone:!0,features:[S],decls:21,vars:19,consts:[["role","navigation","aria-label","pagination",1,"pagination","is-small"],[1,"pagination-list"],[1,"pagination-link",3,"mousedown","mouseup"],[1,"pagination-link",3,"click","ngClass"],["aria-current","page",1,"pagination-link",3,"click","ngClass"],[1,"pagination-link",3,"mousedown","mouseup","ngClass"]],template:function(r,e){r&1&&(i(0,"nav",0)(1,"ul",1)(2,"li")(3,"a",2),m("mousedown",function(){return e.movePages(-1)})("mouseup",function(){return e.stopTimer()}),i(4,"span"),l(5,"<<"),o()()(),i(6,"li")(7,"a",3),m("click",function(){return e.onPageClick(e.pageRange)}),i(8,"span"),l(9),o()()(),i(10,"li")(11,"a",4),m("click",function(){return e.onPageClick(e.pageRange+1)}),l(12),o()(),i(13,"li")(14,"a",3),m("click",function(){return e.onPageClick(e.pageRange+2)}),i(15,"span"),l(16),o()()(),i(17,"li")(18,"a",5),m("mousedown",function(){return e.movePages(1)})("mouseup",function(){return e.stopTimer()}),i(19,"span"),l(20,">>"),o()()()()()),r&2&&(n(3),I("is-disabled",e.totalPages<=3),n(4),u("ngClass",O(9,Y,e.totalPages==1,e.currentPage===e.pageRange)),n(2),s(e.pageRange),n(2),u("ngClass",R(12,X,e.currentPage===e.pageRange+1)),n(),s(e.pageRange+1),n(2),u("ngClass",O(14,Y,e.totalPages<3,e.currentPage===e.pageRange+2)),n(2),h("",e.pageRange+2," "),n(2),u("ngClass",R(17,Z,e.totalPages<=3)))},dependencies:[A],styles:[".nav[_ngcontent-%COMP%]{height:40px}"]})}return a})();function ee(a,g){if(a&1){let t=y();i(0,"app-pagination",9),m("pageSelected",function(e){C(t);let c=_();return x(c.onPageSelected(e))}),o()}if(a&2){let t=_();u("currentPage",(t.data==null?null:t.data.currentPage)+1)("totalPages",t.data==null?null:t.data.totalPages)}}function te(a,g){if(a&1){let t=y();i(0,"tr",10),m("click",function(){let e=C(t).$implicit,c=_();return x(c.onMfClick(e.time_stamp))}),i(1,"td"),l(2),p(3,"date"),o(),i(4,"td"),l(5),o(),i(6,"td"),l(7),p(8,"titlecase"),o(),i(9,"td"),l(10),p(11,"titlecase"),o(),i(12,"td"),l(13),o(),i(14,"td"),l(15),o(),i(16,"td",11),l(17),o()()}if(a&2){let t=g.$implicit;n(2),s(q(3,7,t.time_stamp,"MMM d, HH:mm")),n(3),s(t.receipt_num),n(2),s(d(8,10,t.source)),n(3),s(d(11,12,t.dest)),n(3),s(t.amount),n(2),s(t.initiator),n(2),s(t.description)}}var W=(()=>{class a{data;showDetails;receiptSelected=new f;pageSelected=new f;screenSize=screen.width;onMfClick(t){this.showDetails&&this.receiptSelected.emit(t)}onPageSelected(t){this.pageSelected.emit(t)}static \u0275fac=function(r){return new(r||a)};static \u0275cmp=v({type:a,selectors:[["app-money-flow-table"]],inputs:{data:"data",showDetails:"showDetails"},outputs:{receiptSelected:"receiptSelected",pageSelected:"pageSelected"},standalone:!0,features:[S],decls:44,vars:38,consts:[[1,"table","is-narrow-touch","is-size-7-touch","is-size-6","has-text-centered","is-clipped"],[1,"m-0","p-0"],[1,"is-flex","is-justify-content-center","mb-1"],[3,"currentPage","totalPages"],[1,"has-text-centered"],[1,"has-text-centered","is-narrow"],[1,"has-text-centered","is-hidden-mobile"],[1,"is-hidden-mobile","has-text-centered","has-text-weight-bold"],[1,"has-text-centered","has-text-weight-bold"],[3,"pageSelected","currentPage","totalPages"],[3,"click"],[1,"is-hidden-mobile"]],template:function(r,e){r&1&&(i(0,"table",0)(1,"thead")(2,"tr")(3,"td",1)(4,"div",2),T(5,ee,1,2,"app-pagination",3),o()()(),i(6,"tr")(7,"th",4),l(8),p(9,"translate"),o(),i(10,"th",4),l(11),p(12,"translate"),o(),i(13,"th",4),l(14),p(15,"translate"),o(),i(16,"th",5),l(17),p(18,"translate"),o(),i(19,"th",5),l(20),p(21,"translate"),o(),i(22,"th",5),l(23),p(24,"translate"),o(),i(25,"th",6),l(26),p(27,"translate"),o()()(),i(28,"tbody"),b(29,te,18,14,"tr",null,N),o(),i(31,"tfoot")(32,"tr"),P(33,"td"),i(34,"td",7),l(35),o(),P(36,"td")(37,"td"),i(38,"td",8),l(39),o(),P(40,"td"),i(41,"td",8),l(42),p(43,"translate"),o()()()()),r&2&&(I("is-hoverable",e.showDetails)("is-hidden",!(!(e.data==null||e.data.moneyFlows==null)&&e.data.moneyFlows.length)),n(3),H("colspan",e.screenSize>500?7:6),n(2),w(e.data!=null&&e.data.totalPages&&e.data.totalPages>1?5:-1),n(3),s(d(9,22,"Date")),n(3),s(d(12,24,"Receipt")),n(3),s(d(15,26,"Source")),n(3),s(d(18,28,"Dest")),n(3),s(d(21,30,"Amount")),n(3),s(d(24,32,"Initiator")),n(3),s(d(27,34,"Description")),n(3),F(e.data==null?null:e.data.moneyFlows),n(2),I("is-hidden",!(e.data!=null&&e.data.totalPages)),n(4),B("",e.data==null||e.data.moneyFlows==null?null:e.data.moneyFlows.length,"/",e.data==null?null:e.data.transactionsNum,""),n(4),B("",e.data==null?null:e.data.totalSumPage,"/",e.data==null?null:e.data.totalSum,""),n(3),j("",d(43,36,"Page")," ",(e.data==null?null:e.data.currentPage)+1,"/",e.data==null?null:e.data.totalPages,""))},dependencies:[U,K,D,E,G],styles:[".min-width[_ngcontent-%COMP%]{min-width:80px}"]})}return a})();var Pe=(()=>{class a{max_length=screen.width<500?7:18;transform(t,...r){if(t===void 0)return"";t=t.trim();let e=t.split(`
`);return e[0].length>=this.max_length&&(e[0]=e[0].substring(0,this.max_length)+"..."),e.length>1?`${e[0]} [+${e.length-1}]`:e[0]}static \u0275fac=function(r){return new(r||a)};static \u0275pipe=V({name:"transactionServicesPipe",type:a,pure:!0,standalone:!0})}return a})();function ie(a,g){if(a&1&&(i(0,"div",5),l(1),o()),a&2){let t=g.$implicit;n(),s(t)}}function ne(a,g){if(a&1&&(i(0,"div",6),P(1,"app-money-flow-table",7),o()),a&2){let t=_(2);n(),u("data",t.relatedTransactions)}}function ae(a,g){a&1&&(l(0),p(1,"translate")),a&2&&h(" ",d(1,1,"Show Related Transactions")," ")}function oe(a,g){a&1&&(l(0),p(1,"translate")),a&2&&h(" ",d(1,1,"Loading"),"... ")}function le(a,g){if(a&1){let t=y();i(0,"div",1)(1,"button",8),m("click",function(){C(t);let e=_(2);return x(e.onShowMoneyTransactionsClick(e.transaction.receipt_num,e.transaction.date_time))}),T(2,ae,2,3)(3,oe,2,3),o()()}if(a&2){let t=_(2);n(2),w(t.requestFlag?3:2)}}function re(a,g){if(a&1&&(i(0,"table",2)(1,"tr")(2,"th",3),l(3),p(4,"translate"),o(),i(5,"th",3),l(6),p(7,"translate"),o(),i(8,"th",4),l(9),p(10,"translate"),o(),i(11,"th",3),l(12),p(13,"translate"),o(),i(14,"th",4),l(15),p(16,"translate"),o(),i(17,"th",3),l(18),p(19,"translate"),o(),i(20,"th",3),l(21),p(22,"translate"),o()(),i(23,"tr")(24,"td",3),l(25),o(),i(26,"td",3),l(27),o(),i(28,"td",4),l(29),o(),i(30,"td",3),l(31),o(),i(32,"td",4),l(33),o(),i(34,"td",3),l(35),o(),i(36,"td",3),l(37),o()()(),i(38,"div",1),b(39,ie,2,1,"div",5,$),o(),T(41,ne,2,1,"div",6)(42,le,4,1,"div",1)),a&2){let t=_();n(3),s(d(4,15,"Status")),n(3),s(d(7,17,"Free")),n(3),s(d(10,19,"Phone")),n(3),s(d(13,21,"Money accepted")),n(3),s(d(16,23,"Money posted")),n(3),s(d(19,25,"Payment type")),n(3),s(d(22,27,"Employee")),n(4),s(t.transaction.finished?"OK":"ERR"),n(2),s(t.transaction.has_free_haircut?"YES":"NO"),n(2),s(t.transaction.phone_num),n(2),s(t.transaction.money_accepted),n(2),s(t.transaction.money_posted),n(2),s(t.transaction.payment_type),n(2),s(t.transaction.employee),n(2),F(t.allServices()),n(2),w(t.relatedTransactions?41:42)}}function se(a,g){if(a&1){let t=y();i(0,"div",1)(1,"div",9),l(2,"No details available"),o(),i(3,"button",8),m("click",function(){C(t);let e=_();return x(e.closeDetails())}),i(4,"span"),l(5,"OK"),o()()()}}var Ve=(()=>{class a{httpService;transaction;active=!1;closeEvent=new f;requestFlag=!1;relatedTransactions;constructor(t){this.httpService=t}onShowMoneyTransactionsClick(t,r){!r||!t||(this.requestFlag=!0,this.httpService.getMoneyFlowsByReceiptNum(t,r).subscribe({next:e=>this.relatedTransactions={moneyFlows:e},complete:()=>this.requestFlag=!1}))}closeDetails(){this.closeEvent.emit(!0),this.relatedTransactions=void 0}allServices(){return this.transaction?.services.split(`
`)}static \u0275fac=function(r){return new(r||a)(z(L))};static \u0275cmp=v({type:a,selectors:[["app-transaction-details"]],inputs:{transaction:"transaction",active:"active"},outputs:{closeEvent:"close"},standalone:!0,features:[S],decls:3,vars:2,consts:[[3,"close","active"],[1,"has-text-centered","my-1"],[1,"table","my-0","is-narrow-mobile","is-size-6","is-size-7-touch","is-fullwidth"],[1,"has-text-centered"],[1,"has-text-centered","is-hidden-mobile"],[1,"has-background-success-70","is-size-7-touch"],[1,"is-flex","is-justify-content-center","my-3","my-2",2,"width","100%"],[3,"data"],[1,"button","is-small",3,"click"],[1,"box"]],template:function(r,e){r&1&&(i(0,"app-modal",0),m("close",function(){return e.closeDetails()}),T(1,re,43,29)(2,se,6,0,"div",1),o()),r&2&&(u("active",e.active),n(),w(e.transaction?1:2))},dependencies:[J,W,D,E]})}return a})();var qe=(()=>{class a{fromDateTime;toDateTime;dates=new f;constructor(){let t=new Date,r=new Date;t.setUTCHours(0),t.setMinutes(0),t.setSeconds(0),r.setUTCHours(23),r.setMinutes(59),r.setSeconds(0),this.toDateTime=r.toISOString().substring(0,19),this.fromDateTime=t.toISOString().substring(0,19)}ngOnInit(){setTimeout(()=>this.emitDates())}onDateChange(t){let r=t.target;r.getAttribute("id")==="fromDateTime"?this.fromDateTime=r.value:r.getAttribute("id")==="toDateTime"&&(this.toDateTime=r.value)}emitDates(){this.dates.emit({from:this.fromDateTime,to:this.toDateTime})}static \u0275fac=function(r){return new(r||a)};static \u0275cmp=v({type:a,selectors:[["app-date-between"]],outputs:{dates:"dates"},standalone:!0,features:[S],decls:22,vars:11,consts:[[1,"container","is-max-tablet","my-2"],[1,"columns","is-centered"],[1,"column","is-narrow"],[1,"field","has-addons","is-justify-content-center"],[1,"control"],[1,"button","is-static","min-width","is-size-7-touch"],["type","datetime-local","id","fromDateTime",1,"input","is-size-7-touch",3,"change","value"],["type","datetime-local","id","toDateTime",1,"input","is-size-7-touch",3,"change","value"],[1,"column","is-narrow","has-text-centered"],[1,"button","is-size-7-touch",3,"click"]],template:function(r,e){r&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"p",4)(5,"a",5),l(6),p(7,"translate"),o()(),i(8,"p",4)(9,"input",6),m("change",function(M){return e.onDateChange(M)}),o()()()(),i(10,"div",2)(11,"div",3)(12,"p",4)(13,"a",5),l(14),p(15,"translate"),o()(),i(16,"p",4)(17,"input",7),m("change",function(M){return e.onDateChange(M)}),o()()()(),i(18,"div",8)(19,"button",9),m("click",function(){return e.emitDates()}),l(20),p(21,"translate"),o()()()()),r&2&&(n(6),h("",d(7,5,"From"),":"),n(3),u("value",e.fromDateTime),n(5),h("",d(15,7,"To"),":"),n(3),u("value",e.toDateTime),n(3),s(d(21,9,"Show")))},dependencies:[D,E]})}return a})();export{Pe as a,G as b,W as c,Ve as d,qe as e};
